<!DOCTYPE html>
<html lang="fr">
<head>
  <title>Sport Webapps</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/alasql/0.3/alasql.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.7.12/xlsx.core.min.js"></script>

  <nav class="navbar fixed-top navbar-light bg-light" id="nav1">
    <a class="navbar-brand" href="#">TIME</a>
    <a class="navbar-brand" href="#">|</a>
    <a class="navbar-brand" href="#">Score A :</a>
    <a class="navbar-brand" href="#">Score B :</a>
  </nav>
  <nav class="navbar fixed-bottom navbar-light bg-light" id="nav2">
    <button type="button" class="btn btn-secondary btn-lg btn-block" onclick="finpartie()">Fin de partie</button>

  </nav>




</head>
<div class="container-fluid" id="home">
    <div class="row">
        <div class="col-12 p-0">
            <div class="jumbotron min-vh-100 text-center m-0 bg-info d-flex flex-column justify-content-center">
                <h1 class="display-4">Lancer la partie</h1>
                <p class="lead">This is a full-screen centered hero unit.</p>
                <p class="lead">
                    <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid" id="game">
    <div class="row">
        <div class="col-12 p-0">

            <div class="jumbotron min-vh-100 text-center m-0 bg-info d-flex flex-column justify-content-center">
                <div class="card" id="engagement">
                    <div class="card-body">
                        <button type="button" onclick="engagementA()" class="btn btn-primary btn-lg btn-block">Engagement équipe A</button>
                        <button type="button"  onclick="engagementB()" class="btn btn-primary btn-lg btn-block">Engagement équipe B</button>
                    </div>
                  </div>

                  <div class="card" id="equipeA">
                    <div class="card-body bg-danger">
                        <button type="button" onclick="tirmenuA()" class="btn btn-primary btn-lg btn-block">TIR</button>
                        <button type="button" class="btn btn-primary btn-lg btn-block">PASSE</button>
                        <button type="button"  onclick="perteA()" class="btn btn-primary btn-lg btn-block">PERTE</button>
                    </div>
                  </div>


                  <div class="card" id="equipeB">
                    <div class="card-body bg-info">
                        <button type="button" onclick="tirmenuB()" class="btn btn-primary btn-lg btn-block">TIR</button>
                        <button type="button" class="btn btn-primary btn-lg btn-block">PASSE</button>
                        <button type="button"  onclick="perteB()" class="btn btn-primary btn-lg btn-block">PERTE</button>

                    </div>
                  </div>

                  <div class="card" id="equipeAtir">
                    <div class="card-body bg-danger">
                        <button type="button" onclick="tir3ptsA()" class="btn btn-primary btn-lg btn-block">3 points</button>
                        <button type="button" onclick="tir1ptsA()" class="btn btn-primary btn-lg btn-block">Reussi</button>
                        <button type="button" onclick="tirrecupA()" class="btn btn-primary btn-lg btn-block">Récupération</button>
                        <button type="button" onclick="perteA()" class="btn btn-primary btn-lg btn-block"> Perte</button>
                    </div>
                  </div>

                  <div class="card" id="equipeBtir">
                    <div class="card-body bg-info">
                        <button type="button" onclick="tir3ptsB()" class="btn btn-primary btn-lg btn-block">3 points</button>
                        <button type="button" onclick="tir1ptsB()" class="btn btn-primary btn-lg btn-block">Reussi</button>
                        <button type="button" onclick="tirrecupB()" class="btn btn-primary btn-lg btn-block">Récupération</button>
                        <button type="button" onclick="perteB()" class="btn btn-primary btn-lg btn-block"> Perte</button>
                    </div>
                  </div>






            </div>
        </div>
    </div>
</div>


<div class="container-fluid" id="finpartie">
    <div class="row">
        <div class="col-12 p-0">
            <div class="jumbotron min-vh-100 text-center m-0 bg-info d-flex flex-column justify-content-center">
                <div class="card text-center">
                    <div class="card-header">
                      Featured
                    </div>
                    <div class="card-body">
                        <table class="table table-hover" id="table">
                          </table>
                    </div>
                    <div class="card-footer text-muted">
                        <button onclick="saveFile()">Save XLSX file</button>
                    </div>
                  </div>
            </div>
        </div>
    </div>
</div>


<script>
var state = 0;
var scoreA = 0;
var scoreB = 0;
var t1ptsA = 0;
var t1ptsB = 0;
var t3ptsA = 0;
var t3ptsB = 0;
var passeA = 0;
var passeB = 0;
var tirA = 0;
var tirB = 0;
var pA =0;
var pB =0;
var pertA =0;
var pertB = 0;
var tirpertA =0;
var tirpertB =0;
var tirrecuA =0;
var tirrecuB =0;

document.getElementById("home").style.display = "none"
document.getElementById("game").style.display = "block"
document.getElementById("equipeA").style.display = "none"
document.getElementById("equipeB").style.display = "none"
document.getElementById("equipeAtir").style.display = "none"
document.getElementById("equipeBtir").style.display = "none"
document.getElementById("finpartie").style.display = "none"



// Engagement
function engagementA() {
    document.getElementById("engagement").style.display = "none"
    document.getElementById("equipeA").style.display = "block"
}

function engagementB() {
    document.getElementById("engagement").style.display = "none"
    document.getElementById("equipeB").style.display = "block"
}

// PERTE
function perteA() {
    document.getElementById("equipeA").style.display = "none"
    document.getElementById("equipeAtir").style.display = "none"
    document.getElementById("equipeB").style.display = "block"
    pertA = pertA +1;
}
function perteB() {
    document.getElementById("equipeB").style.display = "none"
    document.getElementById("equipeBtir").style.display = "none"
    document.getElementById("equipeA").style.display = "block"
    pertB = pertB + 1;
}

// TIR
function tirmenuA() {
    document.getElementById("equipeA").style.display = "none"
    document.getElementById("equipeAtir").style.display = "block"
    tirA = tirA + 1;
}
function tirmenuB() {
    document.getElementById("equipeB").style.display = "none"
    document.getElementById("equipeBtir").style.display = "block"
    tirB = tirB + 1;
}

//PASSE
function passeA() {
    pA = pA + 1;
}
function passeB() {
    pB = pB + 1;
}

// 3pts
function tir3ptsA() {
    document.getElementById("equipeA").style.display = "none"
    document.getElementById("equipeAtir").style.display = "none"
    document.getElementById("equipeB").style.display = "block"
    t3ptsA = t3ptsA +1;
    scoreA = scoreA +3;
}
function tir3ptsB() {
    document.getElementById("equipeB").style.display = "none"
    document.getElementById("equipeBtir").style.display = "none"
    document.getElementById("equipeA").style.display = "block"
    t3ptsB = t3ptsB +1;
    scoreB = scoreB +3;
}

// 1pts
function tir1ptsA() {
    document.getElementById("equipeA").style.display = "none"
    document.getElementById("equipeAtir").style.display = "none"
    document.getElementById("equipeB").style.display = "block"
    scoreA = 1 + scoreA;
    t1ptsA = 1 + t1ptsA;
}
function tir1ptsB() {
    document.getElementById("equipeB").style.display = "none"
    document.getElementById("equipeBtir").style.display = "none"
    document.getElementById("equipeA").style.display = "block"
    t1ptsB = 1 + t1ptsB;
    scoreB = 1 + scoreB;
    console.log(t1ptsB);
}

// recup
function tirrecupA() {
    document.getElementById("equipeA").style.display = "block"
    document.getElementById("equipeAtir").style.display = "none"
    tirrecuA = tirrecuA + 1;
}
function tirrecupB() {
    document.getElementById("equipeB").style.display = "block"
    document.getElementById("equipeBtir").style.display = "none"
    tirrecuB = tirrecuB + 1;
}

// tir perte
function tirperteA() {
    document.getElementById("equipeA").style.display = "block"
    document.getElementById("equipeAtir").style.display = "none"
    tirpertA = tirpertA + 1;
}
function tirperteB() {
    document.getElementById("equipeB").style.display = "block"
    document.getElementById("equipeBtir").style.display = "none"
    tirpertB = tirpertB + 1;
}

function finpartie(){
document.getElementById("home").style.display = "none"
document.getElementById("game").style.display = "none"
document.getElementById("equipeA").style.display = "none"
document.getElementById("equipeB").style.display = "none"
document.getElementById("equipeAtir").style.display = "none"
document.getElementById("equipeBtir").style.display = "none"
document.getElementById("nav2").style.display = "none"
document.getElementById("nav1").style.display = "none"
document.getElementById("finpartie").style.display = "block"
var table = document.getElementById("table");
var row = table.insertRow(0);
row.insertCell(0).innerHTML = "Equipe A";
row.insertCell(1).innerHTML = "";
row.insertCell(2).innerHTML = "Equipe B";
var row = table.insertRow(1);
row.insertCell(0).innerHTML = scoreA;
row.insertCell(1).innerHTML = "Score";
row.insertCell(2).innerHTML = scoreB;
var row = table.insertRow(2);
row.insertCell(0).innerHTML = tirA;
row.insertCell(1).innerHTML = "Tirs";
row.insertCell(2).innerHTML = tirB;
var row = table.insertRow(3);
row.insertCell(0).innerHTML = t3ptsA;
row.insertCell(1).innerHTML = "Tirs 3 points";
row.insertCell(2).innerHTML = t3ptsB;
var row = table.insertRow(4);
row.insertCell(0).innerHTML = t1ptsA;
row.insertCell(1).innerHTML = "Tirs 1 point";
row.insertCell(2).innerHTML = t1ptsB;
var row = table.insertRow(5);
row.insertCell(0).innerHTML = tirpertA+tirrecuA;
row.insertCell(1).innerHTML = "Tirs echoués";
row.insertCell(2).innerHTML = tirpertB+tirrecuB;
var row = table.insertRow(6);
row.insertCell(0).innerHTML = tirpertA+tirrecuA;
row.insertCell(1).innerHTML = "Tirs echoués";
row.insertCell(2).innerHTML = tirpertB+tirrecuB;
var row = table.insertRow(7);
row.insertCell(0).innerHTML = pA;
row.insertCell(1).innerHTML = "Passes";
row.insertCell(2).innerHTML = pB;
var row = table.insertRow(8);
row.insertCell(0).innerHTML = pertA;
row.insertCell(1).innerHTML = "Pertes";
row.insertCell(2).innerHTML = pertB;
}






window.saveFile = function saveFile () {
    var sheet_1_data = [{Col_One:1, Col_Two:11}, {Col_One:2, Col_Two:22}];
    var opts = [{sheetid:'Sheet One',header:true}];
    var result = alasql('SELECT * INTO XLSX("sample_file.xlsx",?) FROM ?', 
    									[opts,[sheet_1_data]]);
}
</script>

